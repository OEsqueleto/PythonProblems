from selenium import webdriver
from selenium.webdriver.common.by import By
import time

# ----- CONFIGURAÇÃO -----
# Lista de SKUs a serem testados
sku_list = [
    "377857043C",
    "377857043C033",
    "377857043C2P2",
    "377857043C71N",
    "377857043C999",
    "377857043C9V5",
    "377857043CU71",
    "337857043C",
    "337857043C033",
    "337857043C2P2",
    "337857043C71N",
    "337857043C999",
    "337857043C9V5",
    "337857043CU71",
    "377959565",
    "377959565999",
    "377959565A",
    "377959565A999",
    "3779595651NN",
    "3279595651",
    "32795956511NN",
    "3279595651999",
    "377807657",
    "377807657999",
    "377807657773",
    "377807655",
    "377807655999",
    "377807655773",
    "3778076552GV",
    "3778076552GVPVC",
    "377807655B",
    "377807655B999",
    "377807655B773",
    "377807658",
    "377807658773",
    "377807658999",
    "373837181A",
    "373837181",
    "373837181A999",
    "373837181C05",
    "377853687DA",
    "377827935",
    "377827935A",
    "377863293EVNQ",
    "377711141DXDB",
    "377853687DNI3K",
    "3778536872RA",
    "377853685E",
    "308853555A",
    "308853555ALE",
    "308853555",
    "308853555A773",
    "308853556A",
    "308853556",
    "308853556ALE",
    "308853556A773",
    "3088294521",
    "308829452",
    "3088294511",
    "308829451",
    "3088294531",
    "308829453",
    "376945096A",
    "376945095A",
    "376945112A",
    "376945111A",
    "377853193B",
    "APR898700K",
    "APR898700K71N",
    "APR898700K1GR",
    "APR898700K1AK",
    "APR898700K999",
    "APR898700AN",
    "APR898700AN1NN",
    "APR898700AM",
    "APR898700AM1NN",
    "APR898700AH",
    "APR898700AH1GR",
    "APR898700AH71N",
    "APR898700AH999",
    "APR061220",
    "APR06122071N",
    "377837181A",
    "377837181",
    "377837181A999",
    "377837181C05",
    "376853687F",
    "5x7853687B",
    "377857077F",
    "377857077F1NN",
    "377857077F999",
    "3B0853601FDY",
    "377853601",
    "5X0959537",
    "5X0419091AB",
    "5X0419091AB1NN",
    "5x6945112d",
    "5x6945111d",
    "377945097B",
    "377945097B1KE",
    "377837181C",
    "377857961A05",
    "5X6945096D",
    "5X6945095E",
    "377807221AE",
    "377807421E",
    "5x03807421A",
    "5X0711118AVNQ",
    "5X0711118DVN",
    "5X0711118UNQ",
    "377863293EFGK",
    "542959565",
    "377919033GD",
    "377919033AG",
    "377919033HB",
    "377919033KG",
    "377419669C",
    "5X0880201A",
    "3771212251RA",
    "5X0419091",
    "5X0419091T",
    "5X0419091T1NN",
    "5X04190911NN",
    "5X0419091AP",
    "5X0419091AP1NN",
    "5X0419091AN",
    "5X0419091AN1NN",
    "5X0419091AG",
    "5X0419091AG1NN",
    "5X0419091APTHW",
    "5X0419669A",
    "5X0419669A1NN",
    "377422371D",
    "305422375A",
    "5X9945112C",
    "5X9945112A",
    "373857043A",
    "373857043A999",
    "373857043A2BV",
    "379941531L",
    "5W0863835A",
    "5W0863835",
    "377863833P",
    "377863833",
    "377863833P",
    "377863353L",
    "377863353H",
    "373941531JO",
    "373941531KO",
    "373941531LO",
    "377863293KXG4",
    "93218414",
    "93202323",
    "93231183",
    "90304341",
    "90327307",
    "90327308",
    "90339944",
    "90339943",
    "90339942",
    "90276297",
    "90376182",
    "90377395",
    "93202324",
    "93202071",
    "93202071ALT",
    "93256728",
    "90376131",
    "93223669",
    "90376130",
    "93223670",
    "93224657",
    "90369814",
    "90297557",
    "3495475",
    "90427888",
    "93239756",
    "90327276",
    "90339904",
    "90327275",
    "90339903",
    "90327311",
    "93204766",
    "90376182",
    "93251376",
    "90214669",
    "90439331",
    "93226705",
    "93226706",
    "93256727",
    "90277985",
    "93271755",
    "90376081",
    "93256727",
    "93240343",
    "90378087",
    "93276225",
    "93229665",
    "305120102",
    "305120101",
    "90327270",
    "90327271",
    "93218221",
    "93210993",
    "93223361",
    "93210999",
    "93223363",
    "93223359",
    "93223357",
    "93223364",
    "90327271",
    "93213600",
    "90379368",
    "V1G214900",
    "V3G215005",
    "V1G217700",
    "90271904",
    "90271903",
    "94654223",
    "90443382",
    "90355761",
    "90511966",
    "93234187",
    "90347026",
    "90347027",
    "90444203",
    "90444204",
    "93228426",
    "93248956",
    "90332355",
    "90332356",
    "90434155",
    "93228757",
    "90434156",
    "93228756",
    "90407004"
    # ... adicione quantos SKUs quiser
]

# Inicializa o driver (Chrome). Ajuste se for usar Firefox ou outro.
driver = webdriver.Chrome()

try:
    for sku in sku_list:
        url = f"https://lista.mercadolivre.com.br/{sku}"
        print(f"Abrindo SKU {sku}: {url}")
        driver.get(url)
        time.sleep(2)  # espera a página carregar

        # Tenta encontrar a mensagem de "sem anúncios"
        try:
            aviso = driver.find_element(
                By.CSS_SELECTOR,
                "h3.ui-search-rescue__title"
            )
            if "Não há anúncios que correspondam à sua busca" in aviso.text:
                print(f"  → SKU {sku}: sem anúncios. Pulando.\n")
                continue  # pula para o próximo SKU
        except:
            # Se não encontrar o elemento, segue adiante
            pass

        # Se chegou aqui, há pelo menos um anúncio
        print(f"  → SKU {sku}: anúncios encontrados! Aguardando 4 s e scroll...")
        time.sleep(4)

        # Executa scroll de 800px vertical
        driver.execute_script("window.scrollBy(0, 800);")
        print("  → Scroll realizado. Seguindo para o próximo.\n")

finally:
    driver.quit()
    print("Concluído. Navegador fechado.")
